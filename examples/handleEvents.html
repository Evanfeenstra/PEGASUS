<!-- BE SURE TO HAVE SETUP PEGASUS ON DEVNET-->

<html>
<meta charset="utf-8" />

<head>
  <title>PEGASUS Handle Events</title>
</head>

<body>
  <div id="output"></div>
  <button onClick="connect()">connect</button>
  <label id="provider"></label>
  <label id="account"></label>
  <script>
    const outputHtml = document.querySelector("#output")
    
    const connect = async () => {

      if (!window.iota) {
        outputHtml.innerHTML += `Pegasus Not Installed`
      }

      const isConnected = await window.iota.connect()
      if (isConnected) {
        outputHtml.innerHTML += `Connected`
      } else outputHtml.innerHTML += `User denied connection`

      const lblProvider = document.querySelector("#provider")
      lblProvider.textContent = window.iota.selectedProvider
      window.iota.on('onProviderChanged', provider => lblProvider.textContent = provider)

      const lblAccount= document.querySelector("#account")
      lblAccount.textContent = window.iota.selectedAccount
      window.iota.on('onAccountChanged', account => lblAccount.textContent = account)

      //in order to see changes you should change for example provider and selected account from the popup
    }
  </script>
</body>

</html>